(this["webpackJsonpgo-green"]=this["webpackJsonpgo-green"]||[]).push([[0],{137:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),s=(a(137),a(12)),i=a(20),l=a(19),u=a(204),d=a(14),p=a.n(d),b=a(23),j=a(224),m=a(205),h=a(201),O=a(219),g=a(206),x=a(41),f=a.n(x),y=a(81),v=a(197),C=a(199),w=a(37),k=(a(139),a(153),w.a.initializeApp({apiKey:"AIzaSyB7CZPZy-JTIiSJItjEeePmhjjJtTogYUg",authDomain:"go-green-c7d48.firebaseapp.com",projectId:"go-green-c7d48",storageBucket:"go-green-c7d48.appspot.com",messagingSenderId:"355828304660",appId:"1:355828304660:web:e2092ba865b3d388959001"})),I=k.auth(),F=k.firestore(),S=a(3),P=r.a.createContext(),L=function(){return Object(n.useContext)(P)},T=function(e){var t=e.children,a=Object(n.useState)(),r=Object(s.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)(!0),l=Object(s.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){return I.onAuthStateChanged((function(e){c(e),d(!1)}))}),[]);var p={currentUser:o,login:function(e,t){return I.signInWithEmailAndPassword(e,t)},signup:function(e,t){return I.createUserWithEmailAndPassword(e,t)},logout:function(){return I.signOut()},resetPassword:function(e){return I.sendPasswordResetEmail(e)}};return Object(S.jsx)(P.Provider,{value:p,children:!u&&t})},N=function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},R=function(e,t){var a=w.a.auth().currentUser,n={uid:a.uid,firstName:N(e),lastName:N(t)};return F.collection("users").doc(a.uid).set(n),a.updateProfile({displayName:N(e)})},M=a(222),W=a(203),B=a(220),E=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),G=function(){var e=r.a.useRef(),t=r.a.useRef(),a=r.a.useRef(),n=r.a.useRef(),o=r.a.useRef(),c=L().signup,d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],w=x[1],k=r.a.useState(!1),I=Object(s.a)(k,2),F=I[0],P=I[1],T=E(),N=Object(l.g)(),G=function(){var r=Object(b.a)(p.a.mark((function r(s){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.preventDefault(),n.current.value===o.current.value){r.next=3;break}return r.abrupt("return",w("Passwords do not match"));case 3:return r.prev=3,w(""),P(!0),r.next=8,c(a.current.value,n.current.value).then((function(a){R(e.current.value,t.current.value)}));case 8:N.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),w("Failed to create your account."+r.t0.message);case 14:P(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e){return r.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(B.a,{p:2}),Object(S.jsxs)("div",{className:T.paper,children:[Object(S.jsx)(y.a,{className:T.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:T.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign up"}),v&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(W.a,{children:"Error"}),v]}),Object(S.jsxs)("form",{className:T.form,onSubmit:G,children:[Object(S.jsxs)(u.a,{container:!0,spacing:2,children:[Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(O.a,{autoComplete:"off",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",inputRef:a,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:n,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"passwordConfirm",label:"Confirm Password",type:"password",id:"passwordConfirm",autoComplete:"off",inputRef:o,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})})]}),Object(S.jsx)(m.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:T.submit,children:"Sign Up"}),Object(S.jsx)(m.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:T.cancel,children:"Cancel"}),Object(S.jsx)(u.a,{container:!0,justify:"flex-end",children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/login",variant:"body2",color:"secondary",children:"Already have an account? Log in"})})})]})]})]})},A=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),D=function(){var e=r.a.useRef(),t=r.a.useRef(),a=A(),n=L().login,o=r.a.useState(""),c=Object(s.a)(o,2),d=c[0],x=c[1],v=r.a.useState(!1),w=Object(s.a)(v,2),k=w[0],I=w[1],F=Object(l.g)(),P=function(){var a=Object(b.a)(p.a.mark((function a(r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,x(""),I(!0),a.next=6,n(e.current.value,t.current.value);case 6:F.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),x("Failed to sign in");case 12:I(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(B.a,{p:2}),Object(S.jsxs)("div",{className:a.paper,children:[Object(S.jsx)(y.a,{className:a.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:a.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Log in"}),d&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(W.a,{children:"Error"}),d]}),Object(S.jsxs)("form",{className:a.form,onSubmit:P,children:[Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(m.a,{disabled:k,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:a.submit,children:"Log In"}),Object(S.jsx)(m.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:a.cancel,children:"Cancel"}),Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/forgot-password",variant:"body2",color:"secondary",children:"Forgot password?"})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})]})]})]})]})},U=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),$=function(){var e=r.a.useRef(),t=U(),a=L().resetPassword,n=r.a.useState(""),o=Object(s.a)(n,2),c=o[0],l=o[1],d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],w=x[1],k=r.a.useState(!1),I=Object(s.a)(k,2),F=I[0],P=I[1],T=function(){var t=Object(b.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,w(""),l(""),P(!0),t.next=7,a(e.current.value);case 7:w("Check your inbox for further instructions"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),l("Failed to reset password. "+t.t0.message);case 13:P(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(B.a,{p:2}),Object(S.jsxs)("div",{className:t.paper,children:[Object(S.jsx)(y.a,{className:t.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:t.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Reset Password"}),c&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(W.a,{children:"Error"}),c]}),v&&Object(S.jsxs)(M.a,{severity:"success",children:[Object(S.jsx)(W.a,{children:"Reset Email Sent"}),v]}),Object(S.jsxs)("form",{className:t.form,onSubmit:T,children:[Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(m.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,children:"Reset via Email"}),Object(S.jsx)(m.a,{component:i.b,to:"/login",fullWidth:!0,variant:"contained",color:"secondary",className:t.cancel,children:"GO TO LOG IN"}),Object(S.jsx)(u.a,{container:!0,children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})})]})]})]})},q=a(76),z=a(208),J=a(209),H=a(210),K=a(111),V=a.n(K),Z=a(112),Q=a.n(Z),Y=a(114),X=a.n(Y),_=a(113),ee=a.n(_),te=a(207),ae=Object(te.a)({palette:{primary:{light:"#484848",main:"#212121",mainLight:"#303030",dark:"#000000",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),ne=a(211),re=Object(q.a)({overrides:{MuiBottomNavigation:{root:{position:"fixed",bottom:0,width:"100%",backgroundColor:ae.palette.primary.main}},MuiBottomNavigationAction:{root:{color:ae.palette.primary.contrastText,boxSizing:"border-box","&:hover":{color:ae.palette.secondary.main},"&$selected":{color:ae.palette.secondary.light,"&:hover":{color:ae.palette.secondary.main}}}}}}),oe=function(e){return Object(S.jsx)(z.a,{theme:re,children:Object(S.jsxs)(J.a,{value:e.pageValue,onChange:function(t,a){e.onPageChange(a)},showLabels:!0,children:[Object(S.jsx)(H.a,{component:i.b,to:"/",label:"Home",icon:Object(S.jsx)(V.a,{})}),Object(S.jsx)(H.a,{component:i.b,to:"/check-in",label:"Check-in",icon:Object(S.jsx)(ne.a,{color:"secondary",variant:"dot",invisible:e.checkinCompleted,children:Object(S.jsx)(Q.a,{})})}),Object(S.jsx)(H.a,{component:i.b,to:"/badges",label:"Badges",icon:Object(S.jsx)(ee.a,{})}),Object(S.jsx)(H.a,{component:i.b,to:"/ranking",label:"Ranking",icon:Object(S.jsx)(X.a,{})})]})})},ce=a(216),se=a(217),ie=a(202),le=a(223),ue=a(215),de=a(213),pe=a(214),be=a(212),je=function(e){return Object(S.jsxs)(le.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsx)(be.a,{id:"alert-dialog-title",children:"ERROR"}),Object(S.jsx)(de.a,{children:Object(S.jsx)(pe.a,{id:"alert-dialog-description",children:e.errorMsg})}),Object(S.jsx)(ue.a,{children:Object(S.jsx)(m.a,{onClick:e.onClose,autoFocus:!0,children:"OK"})})]})},me=Object(q.a)({overrides:{MuiAppBar:{colorPrimary:{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.dark}},MuiButton:{root:{position:"absolute",right:10,color:ae.palette.secondary.main,backgroundColor:ae.palette.primary.main,"&:hover":{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.light}}}}}),he=function(){var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],n=t[1],o=L(),c=o.currentUser,u=o.logout,d=Object(l.g)(),j=r.a.useState(!1),h=Object(s.a)(j,2),O=h[0],g=h[1],x=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,u();case 4:d.push("/login"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out"),g(!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(z.a,{theme:me,children:Object(S.jsx)(ce.a,{position:"static",children:Object(S.jsxs)(se.a,{children:[Object(S.jsxs)(ie.a,{component:i.b,to:"/",edge:"start",color:"inherit","aria-label":"home",children:[Object(S.jsx)(f.a,{}),Object(S.jsx)(B.a,{mr:1}),Object(S.jsx)(y.a,{variant:"h5",children:"GoGreen"})]}),null===c?Object(S.jsx)(m.a,{component:i.b,to:"/login",children:"LOG IN"}):Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(m.a,{onClick:x,children:"LOG OUT"}),Object(S.jsx)(je,{open:O,onClose:function(){g(!1)},errorMsg:a})]})]})})})},Oe=a(94),ge=a(29),xe=a(75),fe=a.n(xe),ye=function(){return fe.a.utc().startOf("day").toDate()};var ve=function(e){var t=(new Date).valueOf().toString(36);return function(e){for(var t=(new Date).getTime(),a=0;a<1e7&&!((new Date).getTime()-t>e);a++);}(1),e?e+t:t},Ce=function(e){return e>75?"green":e>50?"gold":e>25?"orange":"red"},we=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.collection("surveys").where("date",">",ye()).get().then((function(e){var t={};e.forEach((function(e){var a=e.data().city,n=e.data().coordinates.lat,r=e.data().coordinates.lng,o=e.data().score;t.hasOwnProperty(a)?t[a]=Object(ge.a)(Object(ge.a)({},t[a]),{},{sum:parseFloat(t[a].sum)+parseFloat(o),count:parseFloat(t[a].count)+1}):t[a]={id:ve("marker"),city:a,color:"green",coordinates:[n,r],sum:parseFloat(o),count:1}}));var a=[];return Object.entries(t).forEach((function(e){var t=Object(s.a)(e,2),n=(t[0],t[1]),r=Math.ceil(parseFloat(n.sum)/parseFloat(n.count));a.push({id:n.id,city:n.city,color:Ce(r),coordinates:n.coordinates,value:66,score:r})})),a})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=a(5),Ie=a(66),Fe=function(e){return Math.random()>.5?e*Math.random():-e*Math.random()},Se=function(e){var t=Math.max(e.value/12,1),a=new ke.s(t,10,10),n=new ke.j({color:new ke.d(e.color)}),r=new ke.i(a,n),o=new ke.n(e.color,1,0,2),c=Object(Ie.a)(r.geometry,{backside:!1,coefficient:.2,color:e.color,power:3,size:15});r.children=[],r.add(o),r.add(c);for(var i=[],l=0;l<10;l++){var u=new ke.s(Math.min(t*Math.random()/2,1),10,10),d=new ke.j({color:new ke.d(e.color)}),p=new ke.i(u,d);p.lookAt(new ke.x(0,0,0)),i.push(p),r.add(p)}return i.forEach((function(e,a){!function n(){var r={opacity:.1,position:e.position.clone().toArray(),scale:Math.max(.5,Math.random())},c={opacity:.5,position:[Fe(3*t),Fe(3*t),Fe(t)],scale:.01};Object(Oe.b)({from:r,to:c,animationDuration:4e3,easingFunction:["Quadratic","InOut"],onUpdate:function(){var t=Object(s.a)(r.position,3),a=t[0],n=t[1],c=t[2],i=e.material,l=Fe(.03);o.intensity+l>0&&o.intensity+l<1.8&&(o.intensity+=l),i.opacity=r.opacity,e.scale.x=r.scale,e.scale.y=r.scale,e.scale.z=r.scale,e.position.set(a,n,c)},onEnd:n,delay:200*a})}()})),r},Pe=function(){var e=r.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!0),c=Object(s.a)(o,2),i=c[0],l=c[1];r.a.useEffect((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,we();case 4:t=e.sent,n(t),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var u={cameraRotateSpeed:.5,cameraAutoRotateSpeed:.35,focusAnimationDuration:2e3,enableMarkerGlow:"true",globeCloudsOpacity:.5,globeGlowColor:"blue",enableMarkerTooltip:!0,markerTooltipRenderer:function(e){return"".concat(e.city,": ").concat(e.score)},markerRenderer:Se};return i?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)("div",{style:{backgroundColor:"black",height:"100vh"},children:Object(S.jsx)(Oe.a,{height:"90vh",width:"auto",markers:a,options:u,initialCoordinates:[42.3355,71.1685],initialCameraDistanceRadiusScale:5})})},Le=a(154),Te=a(218),Ne=a(225),Re=a(78),Me=a(77),We=a(80),Be=a.n(We),Ee=Object(v.a)((function(e){return{cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")},autocompleteResults:{padding:"2px"}}})),Ge=function(e){var t=Ee(),a=e.city,n=e.onSetCity,o=e.coordinates,c=e.onSetCoordinates,s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(We.geocodeByAddress)(t);case 2:return a=e.sent,e.next=5,Object(We.getLatLng)(a[0]);case 5:r=e.sent,n(t),c(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(y.a,{color:"secondary",children:"Which city are you currently in?"}),Object(S.jsx)(Be.a,{value:a,onChange:n,onSelect:s,searchOptions:{types:["(cities)"]},children:function(e){var a=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,c=e.loading;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,Object(ge.a)(Object(ge.a)({},a({placeholder:"Type then select city"})),{},{error:null===o.lat||null===o.lng,variant:"outlined",margin:"dense",required:!0,id:"city",label:"City",name:"city",autoComplete:"off",autoFocus:!0,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}})),Object(S.jsx)("div",{children:c?Object(S.jsx)("div",{style:{color:"white"},children:"...loading"}):Object(S.jsx)(S.Fragment,{children:n.length?Object(S.jsx)(Le.a,{elevation:0,className:t.autocompleteResults,children:n.map((function(e,t){var a={color:ae.palette.primary.contrastText,backgroundColor:e.active?ae.palette.secondary.main:ae.palette.primary.main};return Object(S.jsx)("div",Object(ge.a)(Object(ge.a)({},r(e,{style:a})),{},{children:e.description}),t)}))}):null})})]})}})]})},Ae=Object(q.a)({palette:{secondary:{main:ae.palette.secondary.main}},overrides:{MuiToggleButtonGroup:{root:{padding:"2px 5px",borderRadius:"15px",backgroundImage:"linear-gradient(".concat(Re.a[500],", ").concat(Me.a[300],")")}},MuiToggleButton:{root:{color:"white",backgroundColor:"rgba(0, 0, 0, .5)",fontWeight:"lighter",margin:"3px 0",borderRadius:10,"&:hover":{color:"black",backgroundColor:"rgba(255, 255, 255, .4)"},"&$selected":{color:"black",backgroundColor:"rgba(255, 255, 255, .8)",fontWeight:"bolder","&:hover":{backgroundColor:"rgba(255, 255, 255, .4)"}}}},MuiButton:{root:{backgroundColor:"rgba(255, 255, 255, .2)"}}}}),De=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.mainLight,marginTop:e.spacing(2),marginBottom:e.spacing(10),padding:"30px 0px",display:"flex",flexDirection:"column",alignItems:"center"},greenBold:{color:e.palette.secondary.light,fontWeight:"bolder",marginBottom:"20px"}}})),Ue=function(e,t){var a=De(),n=e.city,r=e.setCity,o=e.coordinates,c=e.setCoordinates,s=e.level,i=e.setLevel,l=e.onSubmit,d=e.submitError;return Object(S.jsx)(z.a,{theme:Ae,children:Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3}),Object(S.jsx)(u.a,{item:!0,xs:10,sm:8,md:6,children:Object(S.jsxs)(Le.a,{className:a.paper,elevation:10,children:[Object(S.jsx)(y.a,{className:a.greenBold,variant:"h5",component:"h1",children:"Today's Check-in"}),Object(S.jsx)(Ge,{city:n,onSetCity:r,coordinates:o,onSetCoordinates:c}),Object(S.jsx)(B.a,{mt:2}),Object(S.jsx)(y.a,{color:"secondary",children:"How did you commute today?"}),Object(S.jsx)(y.a,{color:"secondary",children:"Select a level below."}),Object(S.jsxs)(Ne.a,{orientation:"vertical",value:s,size:"large",exclusive:!0,onChange:function(e,t){null!==t&&i(t)},children:[Object(S.jsx)(Te.a,{value:"100","aria-label":"All Green",children:"100% Green"}),Object(S.jsx)(Te.a,{value:"75","aria-label":"Mostly Green",children:"75% Green + 25% Gasoline"}),Object(S.jsx)(Te.a,{value:"50","aria-label":"Half",children:"50% Green + 50% Gasoline"}),Object(S.jsx)(Te.a,{value:"25","aria-label":"Mostly Gasoline",children:"25% Green + 75% Gasoline"}),Object(S.jsx)(Te.a,{value:"0","aria-label":"All Gasoline",children:"100% Gasoline"})]}),Object(S.jsx)(B.a,{mt:2}),Object(S.jsx)(m.a,{color:"secondary",onClick:l,children:"Submit"}),""!==d&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(B.a,{mt:2}),Object(S.jsx)(M.a,{severity:"error",style:{width:"80%"},children:"Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field."})]})]})}),Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3})]})})},$e=function(e,t,a){var n={uid:w.a.auth().currentUser.uid,date:w.a.firestore.Timestamp.fromDate(fe.a.utc().toDate()),city:e,coordinates:{lat:t.lat,lng:t.lng},score:a};return F.collection("surveys").add(n).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){return console.error("Error adding document: ",e),e.message})),""},qe=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.auth().currentUser,a=t.uid,n={},e.abrupt("return",F.collection("surveys").where("date",">",ye()).get().then((function(e){try{e.forEach((function(e){if(e.data().uid===a)throw n}))}catch(t){if(t===n)return!0}return!1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(e){var t=e.setCheckinCompleted,a=r.a.useState(null),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useState(!0),l=Object(s.a)(i,2),u=l[0],d=l[1];r.a.useEffect((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,qe();case 4:a=e.sent,c(a),t(a),d(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var j=r.a.useState(""),m=Object(s.a)(j,2),h=m[0],O=m[1],g=r.a.useState({lat:null,lng:null}),x=Object(s.a)(g,2),f=x[0],y=x[1],v=r.a.useState("100"),C=Object(s.a)(v,2),w=C[0],k=C[1],I=r.a.useState(""),F=Object(s.a)(I,2),P=F[0],L=F[1];return u?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)(r.a.Fragment,{children:o?Object(S.jsx)(Pe,{}):Object(S.jsx)(Ue,{city:h,setCity:O,coordinates:f,setCoordinates:y,level:w,setLevel:k,onSubmit:function(t){if(L(""),null!==f.lat&&null!==f.lng){var a=$e(h,f,w);""===a?(c(!0),e.setCheckinCompleted(o)):L(a)}else L("Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field.")},submitError:P})})},Je=function(e){return Object(S.jsx)("div",{style:{color:"white"},children:"badges"})},He=function(){return Object(S.jsx)("div",{style:{color:"white"},children:"Ranking"})},Ke=a(118),Ve=function(e){var t=e.component,a=Object(Ke.a)(e,["component"]),n=L().currentUser;return Object(S.jsx)(l.b,Object(ge.a)(Object(ge.a)({},a),{},{render:function(e){return n?Object(S.jsx)(t,Object(ge.a)(Object(ge.a)({},e),a)):Object(S.jsx)(l.a,{to:"/login"})}}))},Ze=function(){var e=r.a.useState(0),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(s.a)(o,2),d=c[0],p=c[1];return Object(S.jsx)("div",{style:{backgroundColor:ae.palette.primary.dark,height:"100%",overflow:"auto"},children:Object(S.jsxs)(i.a,{basename:"/go-green",children:[Object(S.jsx)(T,{children:Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{path:"/signup",component:G}),Object(S.jsx)(l.b,{path:"/login",component:D}),Object(S.jsx)(l.b,{path:"/forgot-password",component:$}),Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(u.a,{container:!0,direction:"column",children:[Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(he,{})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsxs)("main",{children:[Object(S.jsx)(Ve,{path:"/check-in",component:ze,setCheckinCompleted:p}),Object(S.jsx)(Ve,{path:"/badges",component:Je}),Object(S.jsx)(Ve,{path:"/ranking",component:He}),Object(S.jsx)(l.b,{exact:!0,path:"/",children:"home"})]})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(oe,{pageValue:a,onPageChange:n,checkinCompleted:d})})]})})]})})," "]})})};c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(z.a,{theme:ae,children:Object(S.jsx)(Ze,{})})}),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.134425a2.chunk.js.map