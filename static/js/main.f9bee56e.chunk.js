(this["webpackJsonpgo-green"]=this["webpackJsonpgo-green"]||[]).push([[0],{135:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),s=(a(135),a(13)),i=a(19),l=a(18),u=a(201),d=a(12),p=a.n(d),b=a(22),j=a(220),m=a(202),h=a(198),g=a(215),O=a(203),x=a(40),f=a.n(x),y=a(79),v=a(194),C=a(196),w=a(36),I=(a(137),a(151),w.a.initializeApp({apiKey:"AIzaSyB7CZPZy-JTIiSJItjEeePmhjjJtTogYUg",authDomain:"go-green-c7d48.firebaseapp.com",projectId:"go-green-c7d48",storageBucket:"go-green-c7d48.appspot.com",messagingSenderId:"355828304660",appId:"1:355828304660:web:e2092ba865b3d388959001"})),k=I.auth(),F=I.firestore(),S=a(3),P=r.a.createContext(),L=function(){return Object(n.useContext)(P)},T=function(e){var t=e.children,a=Object(n.useState)(),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(!0),l=Object(s.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){return k.onAuthStateChanged((function(e){o(e),d(!1)}))}),[]);var p={currentUser:c,login:function(e,t){return k.signInWithEmailAndPassword(e,t)},signup:function(e,t){return k.createUserWithEmailAndPassword(e,t)},logout:function(){return k.signOut()},resetPassword:function(e){return k.sendPasswordResetEmail(e)}};return Object(S.jsx)(P.Provider,{value:p,children:!u&&t})},N=function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},R=function(e,t){var a=w.a.auth().currentUser,n={uid:a.uid,firstName:N(e),lastName:N(t)};return F.collection("users").doc(a.uid).set(n),a.updateProfile({displayName:N(e)})},W=a(218),B=a(200),G=a(216),E=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),M=function(){var e=r.a.useRef(),t=r.a.useRef(),a=r.a.useRef(),n=r.a.useRef(),c=r.a.useRef(),o=L().signup,d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],w=x[1],I=r.a.useState(!1),k=Object(s.a)(I,2),F=k[0],P=k[1],T=E(),N=Object(l.g)(),M=function(){var r=Object(b.a)(p.a.mark((function r(s){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.preventDefault(),n.current.value===c.current.value){r.next=3;break}return r.abrupt("return",w("Passwords do not match"));case 3:return r.prev=3,w(""),P(!0),r.next=8,o(a.current.value,n.current.value).then((function(a){R(e.current.value,t.current.value)}));case 8:N.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),w("Failed to create your account."+r.t0.message);case 14:P(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e){return r.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(G.a,{p:2}),Object(S.jsxs)("div",{className:T.paper,children:[Object(S.jsx)(y.a,{className:T.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:T.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign up"}),v&&Object(S.jsxs)(W.a,{severity:"error",children:[Object(S.jsx)(B.a,{children:"Error"}),v]}),Object(S.jsxs)("form",{className:T.form,onSubmit:M,children:[Object(S.jsxs)(u.a,{container:!0,spacing:2,children:[Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(g.a,{autoComplete:"off",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",inputRef:a,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:n,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(g.a,{variant:"outlined",required:!0,fullWidth:!0,name:"passwordConfirm",label:"Confirm Password",type:"password",id:"passwordConfirm",autoComplete:"off",inputRef:c,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})})]}),Object(S.jsx)(m.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:T.submit,children:"Sign Up"}),Object(S.jsx)(m.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:T.cancel,children:"Cancel"}),Object(S.jsx)(u.a,{container:!0,justify:"flex-end",children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(O.a,{component:i.b,to:"/login",variant:"body2",color:"secondary",children:"Already have an account? Log in"})})})]})]})]})},D=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),A=function(){var e=r.a.useRef(),t=r.a.useRef(),a=D(),n=L().login,c=r.a.useState(""),o=Object(s.a)(c,2),d=o[0],x=o[1],v=r.a.useState(!1),w=Object(s.a)(v,2),I=w[0],k=w[1],F=Object(l.g)(),P=function(){var a=Object(b.a)(p.a.mark((function a(r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,x(""),k(!0),a.next=6,n(e.current.value,t.current.value);case 6:F.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),x("Failed to sign in");case 12:k(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(G.a,{p:2}),Object(S.jsxs)("div",{className:a.paper,children:[Object(S.jsx)(y.a,{className:a.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:a.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Log in"}),d&&Object(S.jsxs)(W.a,{severity:"error",children:[Object(S.jsx)(B.a,{children:"Error"}),d]}),Object(S.jsxs)("form",{className:a.form,onSubmit:P,children:[Object(S.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(m.a,{disabled:I,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:a.submit,children:"Log In"}),Object(S.jsx)(m.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:a.cancel,children:"Cancel"}),Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:!0,children:Object(S.jsx)(O.a,{component:i.b,to:"/forgot-password",variant:"body2",color:"secondary",children:"Forgot password?"})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(O.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})]})]})]})]})},U=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),$=function(){var e=r.a.useRef(),t=U(),a=L().resetPassword,n=r.a.useState(""),c=Object(s.a)(n,2),o=c[0],l=c[1],d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],w=x[1],I=r.a.useState(!1),k=Object(s.a)(I,2),F=k[0],P=k[1],T=function(){var t=Object(b.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,w(""),l(""),P(!0),t.next=7,a(e.current.value);case 7:w("Check your inbox for further instructions"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),l("Failed to reset password. "+t.t0.message);case 13:P(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(C.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(h.a,{}),Object(S.jsx)(G.a,{p:2}),Object(S.jsxs)("div",{className:t.paper,children:[Object(S.jsx)(y.a,{className:t.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(j.a,{className:t.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Reset Password"}),o&&Object(S.jsxs)(W.a,{severity:"error",children:[Object(S.jsx)(B.a,{children:"Error"}),o]}),v&&Object(S.jsxs)(W.a,{severity:"success",children:[Object(S.jsx)(B.a,{children:"Reset Email Sent"}),v]}),Object(S.jsxs)("form",{className:t.form,onSubmit:T,children:[Object(S.jsx)(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(m.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,children:"Reset via Email"}),Object(S.jsx)(m.a,{component:i.b,to:"/login",fullWidth:!0,variant:"contained",color:"secondary",className:t.cancel,children:"GO TO LOG IN"}),Object(S.jsx)(u.a,{container:!0,children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(O.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})})]})]})]})},q=a(74),J=a(205),z=a(206),H=a(207),K=a(108),V=a.n(K),Z=a(109),Y=a.n(Z),Q=a(111),X=a.n(Q),_=a(110),ee=a.n(_),te=a(204),ae=Object(te.a)({palette:{primary:{light:"#484848",main:"#212121",mainLight:"#303030",dark:"#000000",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),ne=Object(q.a)({overrides:{MuiBottomNavigation:{root:{position:"fixed",bottom:0,width:"100%",backgroundColor:ae.palette.primary.main}},MuiBottomNavigationAction:{root:{color:ae.palette.primary.contrastText,boxSizing:"border-box","&:hover":{color:ae.palette.secondary.main},"&$selected":{color:ae.palette.secondary.light,"&:hover":{color:ae.palette.secondary.main}}}}}}),re=function(e){return Object(S.jsx)(J.a,{theme:ne,children:Object(S.jsxs)(z.a,{value:e.pageValue,onChange:function(t,a){e.onPageChange(a)},showLabels:!0,children:[Object(S.jsx)(H.a,{component:i.b,to:"/",label:"Home",icon:Object(S.jsx)(V.a,{})}),Object(S.jsx)(H.a,{component:i.b,to:"/check-in",label:"Check-in",icon:Object(S.jsx)(Y.a,{})}),Object(S.jsx)(H.a,{component:i.b,to:"/badges",label:"Badges",icon:Object(S.jsx)(ee.a,{})}),Object(S.jsx)(H.a,{component:i.b,to:"/ranking",label:"Ranking",icon:Object(S.jsx)(X.a,{})})]})})},ce=a(212),oe=a(213),se=a(199),ie=a(219),le=a(211),ue=a(209),de=a(210),pe=a(208),be=function(e){return Object(S.jsxs)(ie.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsx)(pe.a,{id:"alert-dialog-title",children:"ERROR"}),Object(S.jsx)(ue.a,{children:Object(S.jsx)(de.a,{id:"alert-dialog-description",children:e.errorMsg})}),Object(S.jsx)(le.a,{children:Object(S.jsx)(m.a,{onClick:e.onClose,autoFocus:!0,children:"OK"})})]})},je=Object(q.a)({overrides:{MuiAppBar:{colorPrimary:{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.dark}},MuiButton:{root:{position:"absolute",right:10,color:ae.palette.secondary.main,backgroundColor:ae.palette.primary.main,"&:hover":{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.light}}}}}),me=function(){var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],n=t[1],c=L(),o=c.currentUser,u=c.logout,d=Object(l.g)(),j=r.a.useState(!1),h=Object(s.a)(j,2),g=h[0],O=h[1],x=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,u();case 4:d.push("/login"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out"),O(!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(J.a,{theme:je,children:Object(S.jsx)(ce.a,{position:"static",children:Object(S.jsxs)(oe.a,{children:[Object(S.jsxs)(se.a,{component:i.b,to:"/",edge:"start",color:"inherit","aria-label":"home",children:[Object(S.jsx)(f.a,{}),Object(S.jsx)(G.a,{mr:1}),Object(S.jsx)(y.a,{variant:"h5",children:"GoGreen"})]}),null===o?Object(S.jsx)(m.a,{component:i.b,to:"/login",children:"LOG IN"}):Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(m.a,{onClick:x,children:"LOG OUT"}),Object(S.jsx)(be,{open:g,onClose:function(){O(!1)},errorMsg:a})]})]})})})},he=a(115),ge=a(29),Oe=a(73),xe=a.n(Oe),fe=function(){return xe.a.utc().startOf("day").toDate()};var ye=function(e){var t=(new Date).valueOf().toString(36);return function(e){for(var t=(new Date).getTime(),a=0;a<1e7&&!((new Date).getTime()-t>e);a++);}(1),e?e+t:t},ve=function(e){return e>75?"green":e>50?"gold":e>25?"orange":"red"},Ce=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.collection("surveys").where("date",">",fe()).get().then((function(e){var t={};e.forEach((function(e){var a=e.data().city,n=e.data().coordinates.lat,r=e.data().coordinates.lng,c=e.data().score;t.hasOwnProperty(a)?t[a]=Object(ge.a)(Object(ge.a)({},t[a]),{},{sum:parseFloat(t[a].sum)+parseFloat(c),count:parseFloat(t[a].count)+1}):t[a]={id:ye("marker"),city:a,color:"green",coordinates:[n,r],sum:parseFloat(c),count:1}}));var a=[];return Object.entries(t).forEach((function(e){var t=Object(s.a)(e,2),n=(t[0],t[1]),r=Math.ceil(parseFloat(n.sum)/parseFloat(n.count));a.push({id:n.id,city:n.city,color:ve(r),coordinates:n.coordinates,value:r})})),a})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=r.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!0),o=Object(s.a)(c,2),i=o[0],l=o[1];r.a.useEffect((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,Ce();case 4:t=e.sent,n(t),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return i?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)("div",{style:{backgroundColor:"black",height:"100vh"},children:Object(S.jsx)(he.a,{height:"90vh",width:"auto",markers:a,options:{cameraRotateSpeed:.5,cameraAutoRotateSpeed:.35,focusAnimationDuration:2e3,enableMarkerGlow:"true",globeCloudsOpacity:.5,globeGlowColor:"blue",markerTooltipRenderer:function(e){return"".concat(e.city,": ").concat(e.value)}},initialCoordinates:[42.3355,71.1685],initialCameraDistanceRadiusScale:5})})},Ie=a(152),ke=a(214),Fe=a(221),Se=a(76),Pe=a(75),Le=a(78),Te=a.n(Le),Ne=Object(v.a)((function(e){return{cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")},autocompleteResults:{padding:"2px"}}})),Re=function(e){var t=Ne(),a=e.city,n=e.onSetCity,c=e.coordinates,o=e.onSetCoordinates,s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Le.geocodeByAddress)(t);case 2:return a=e.sent,e.next=5,Object(Le.getLatLng)(a[0]);case 5:r=e.sent,n(t),o(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(y.a,{color:"secondary",children:"Which city are you currently in?"}),Object(S.jsx)(Te.a,{value:a,onChange:n,onSelect:s,searchOptions:{types:["(cities)"]},children:function(e){var a=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,o=e.loading;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(g.a,Object(ge.a)(Object(ge.a)({},a({placeholder:"Type then select city"})),{},{error:null===c.lat||null===c.lng,variant:"outlined",margin:"dense",required:!0,id:"city",label:"City",name:"city",autoComplete:"off",autoFocus:!0,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}})),Object(S.jsx)("div",{children:o?Object(S.jsx)("div",{style:{color:"white"},children:"...loading"}):Object(S.jsx)(S.Fragment,{children:n.length?Object(S.jsx)(Ie.a,{elevation:0,className:t.autocompleteResults,children:n.map((function(e,t){var a={color:ae.palette.primary.contrastText,backgroundColor:e.active?ae.palette.secondary.main:ae.palette.primary.main};return Object(S.jsx)("div",Object(ge.a)(Object(ge.a)({},r(e,{style:a})),{},{children:e.description}),t)}))}):null})})]})}})]})},We=Object(q.a)({palette:{secondary:{main:ae.palette.secondary.main}},overrides:{MuiToggleButtonGroup:{root:{padding:"2px 5px",borderRadius:"15px",backgroundImage:"linear-gradient(".concat(Se.a[500],", ").concat(Pe.a[300],")")}},MuiToggleButton:{root:{color:"white",backgroundColor:"rgba(0, 0, 0, .5)",fontWeight:"lighter",margin:"3px 0",borderRadius:10,"&:hover":{color:"black",backgroundColor:"rgba(255, 255, 255, .4)"},"&$selected":{color:"black",backgroundColor:"rgba(255, 255, 255, .8)",fontWeight:"bolder","&:hover":{backgroundColor:"rgba(255, 255, 255, .4)"}}}},MuiButton:{root:{backgroundColor:"rgba(255, 255, 255, .2)"}}}}),Be=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.mainLight,marginTop:e.spacing(2),marginBottom:e.spacing(10),padding:"30px 0px",display:"flex",flexDirection:"column",alignItems:"center"},greenBold:{color:e.palette.secondary.light,fontWeight:"bolder",marginBottom:"20px"}}})),Ge=function(e,t){var a=Be(),n=e.city,r=e.setCity,c=e.coordinates,o=e.setCoordinates,s=e.level,i=e.setLevel,l=e.onSubmit,d=e.submitError;return Object(S.jsx)(J.a,{theme:We,children:Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3}),Object(S.jsx)(u.a,{item:!0,xs:10,sm:8,md:6,children:Object(S.jsxs)(Ie.a,{className:a.paper,elevation:10,children:[Object(S.jsx)(y.a,{className:a.greenBold,variant:"h5",component:"h1",children:"Today's Check-in"}),Object(S.jsx)(Re,{city:n,onSetCity:r,coordinates:c,onSetCoordinates:o}),Object(S.jsx)(G.a,{mt:2}),Object(S.jsx)(y.a,{color:"secondary",children:"How did you commute today?"}),Object(S.jsx)(y.a,{color:"secondary",children:"Select a level below."}),Object(S.jsxs)(Fe.a,{orientation:"vertical",value:s,size:"large",exclusive:!0,onChange:function(e,t){null!==t&&i(t)},children:[Object(S.jsx)(ke.a,{value:"100","aria-label":"All Green",children:"100% Green"}),Object(S.jsx)(ke.a,{value:"75","aria-label":"Mostly Green",children:"75% Green + 25% Gasoline"}),Object(S.jsx)(ke.a,{value:"50","aria-label":"Half",children:"50% Green + 50% Gasoline"}),Object(S.jsx)(ke.a,{value:"25","aria-label":"Mostly Gasoline",children:"25% Green + 75% Gasoline"}),Object(S.jsx)(ke.a,{value:"0","aria-label":"All Gasoline",children:"100% Gasoline"})]}),Object(S.jsx)(G.a,{mt:2}),Object(S.jsx)(m.a,{color:"secondary",onClick:l,children:"Submit"}),""!==d&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G.a,{mt:2}),Object(S.jsx)(W.a,{severity:"error",style:{width:"80%"},children:"Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field."})]})]})}),Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3})]})})},Ee=function(e,t,a){var n={uid:w.a.auth().currentUser.uid,date:w.a.firestore.Timestamp.fromDate(xe.a.utc().toDate()),city:e,coordinates:{lat:t.lat,lng:t.lng},score:a};return F.collection("surveys").add(n).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){return console.error("Error adding document: ",e),e.message})),""},Me=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.a.auth().currentUser,a=t.uid,n={},e.abrupt("return",F.collection("surveys").where("date",">",fe()).get().then((function(e){try{e.forEach((function(e){if(e.data().uid===a)throw n}))}catch(t){if(t===n)return!0}return!1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(e){var t=r.a.useState(null),a=Object(s.a)(t,2),n=a[0],c=a[1],o=r.a.useState(!0),i=Object(s.a)(o,2),l=i[0],u=i[1];r.a.useEffect((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(!0),e.next=4,Me();case 4:t=e.sent,c(t),u(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var d=r.a.useState(""),j=Object(s.a)(d,2),m=j[0],h=j[1],g=r.a.useState({lat:null,lng:null}),O=Object(s.a)(g,2),x=O[0],f=O[1],y=r.a.useState("100"),v=Object(s.a)(y,2),C=v[0],w=v[1],I=r.a.useState(""),k=Object(s.a)(I,2),F=k[0],P=k[1];return l?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)(r.a.Fragment,{children:n?Object(S.jsx)(we,{}):Object(S.jsx)(Ge,{city:m,setCity:h,coordinates:x,setCoordinates:f,level:C,setLevel:w,onSubmit:function(e){if(P(""),null!==x.lat&&null!==x.lng){var t=Ee(m,x,C);""===t?c(!0):P(t)}else P("Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field.")},submitError:F})})},Ae=function(e){return Object(S.jsx)("div",{style:{color:"white"},children:"badges"})},Ue=function(){return Object(S.jsx)("div",{style:{color:"white"},children:"Ranking"})},$e=a(116),qe=function(e){var t=e.component,a=Object($e.a)(e,["component"]),n=L().currentUser;return Object(S.jsx)(l.b,Object(ge.a)(Object(ge.a)({},a),{},{render:function(e){return n?Object(S.jsx)(t,Object(ge.a)({},e)):Object(S.jsx)(l.a,{to:"/login"})}}))},Je=function(){var e=r.a.useState(0),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(S.jsx)("div",{style:{backgroundColor:ae.palette.primary.dark,height:"100%",overflow:"auto"},children:Object(S.jsxs)(i.a,{basename:"/go-green",children:[Object(S.jsx)(T,{children:Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{path:"/signup",component:M}),Object(S.jsx)(l.b,{path:"/login",component:A}),Object(S.jsx)(l.b,{path:"/forgot-password",component:$}),Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(u.a,{container:!0,direction:"column",children:[Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(me,{})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsxs)("main",{children:[Object(S.jsx)(qe,{path:"/check-in",component:De}),Object(S.jsx)(qe,{path:"/badges",component:Ae}),Object(S.jsx)(qe,{path:"/ranking",component:Ue}),Object(S.jsx)(l.b,{exact:!0,path:"/",children:"home"})]})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(re,{pageValue:a,onPageChange:n})})]})})]})})," "]})})};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(J.a,{theme:ae,children:Object(S.jsx)(Je,{})})}),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.f9bee56e.chunk.js.map