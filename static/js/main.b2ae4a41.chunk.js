(this["webpackJsonpgo-green"]=this["webpackJsonpgo-green"]||[]).push([[0],{188:function(e,t,a){},206:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),s=(a(188),a(13)),i=a(27),l=a(26),u=a(269),d=a(14),p=a.n(d),j=a(23),b=a(296),h=a(270),m=a(266),O=a(289),g=a(271),x=a(36),f=a.n(x),y=a(104),v=a(262),w=a(264),C=a(50),k=(a(190),a(208),C.a.initializeApp({apiKey:"AIzaSyB7CZPZy-JTIiSJItjEeePmhjjJtTogYUg",authDomain:"go-green-c7d48.firebaseapp.com",projectId:"go-green-c7d48",storageBucket:"go-green-c7d48.appspot.com",messagingSenderId:"355828304660",appId:"1:355828304660:web:e2092ba865b3d388959001"})),I=k.auth(),F=k.firestore(),S=a(4),P=r.a.createContext(),L=function(){return Object(n.useContext)(P)},T=function(e){var t=e.children,a=Object(n.useState)(),r=Object(s.a)(a,2),o=r[0],c=r[1],i=Object(n.useState)(!0),l=Object(s.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){return I.onAuthStateChanged((function(e){c(e),d(!1)}))}),[]);var p={currentUser:o,login:function(e,t){return I.signInWithEmailAndPassword(e,t)},signup:function(e,t){return I.createUserWithEmailAndPassword(e,t)},logout:function(){return I.signOut()},resetPassword:function(e){return I.sendPasswordResetEmail(e)}};return Object(S.jsx)(P.Provider,{value:p,children:!u&&t})},N=function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()},B=function(e,t){var a=C.a.auth().currentUser,n={uid:a.uid,firstName:N(e),lastName:N(t)};return F.collection("users").doc(a.uid).set(n),a.updateProfile({displayName:N(e)})},M=a(292),R=a(268),W=a(290),E=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),G=function(){var e=r.a.useRef(),t=r.a.useRef(),a=r.a.useRef(),n=r.a.useRef(),o=r.a.useRef(),c=L().signup,d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],C=x[1],k=r.a.useState(!1),I=Object(s.a)(k,2),F=I[0],P=I[1],T=E(),N=Object(l.g)(),G=function(){var r=Object(j.a)(p.a.mark((function r(s){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s.preventDefault(),n.current.value===o.current.value){r.next=3;break}return r.abrupt("return",C("Passwords do not match"));case 3:return r.prev=3,C(""),P(!0),r.next=8,c(a.current.value,n.current.value).then((function(a){B(e.current.value,t.current.value)}));case 8:N.push("/"),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),C("Failed to create your account."+r.t0.message);case 14:P(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e){return r.apply(this,arguments)}}();return Object(S.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(m.a,{}),Object(S.jsx)(W.a,{p:2}),Object(S.jsxs)("div",{className:T.paper,children:[Object(S.jsx)(y.a,{className:T.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(b.a,{className:T.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign up"}),v&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(R.a,{children:"Error"}),v]}),Object(S.jsxs)("form",{className:T.form,onSubmit:G,children:[Object(S.jsxs)(u.a,{container:!0,spacing:2,children:[Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(O.a,{autoComplete:"off",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,sm:6,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",inputRef:a,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:n,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(O.a,{variant:"outlined",required:!0,fullWidth:!0,name:"passwordConfirm",label:"Confirm Password",type:"password",id:"passwordConfirm",autoComplete:"off",inputRef:o,InputLabelProps:{classes:{root:T.cssLabel,focused:T.cssFocused}},InputProps:{classes:{root:T.cssOutlinedInput,input:T.cssInput,focused:T.cssFocused,notchedOutline:T.notchedOutline},inputMode:"numeric"}})})]}),Object(S.jsx)(h.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:T.submit,children:"Sign Up"}),Object(S.jsx)(h.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:T.cancel,children:"Cancel"}),Object(S.jsx)(u.a,{container:!0,justify:"flex-end",children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/login",variant:"body2",color:"secondary",children:"Already have an account? Log in"})})})]})]})]})},D=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),A=function(){var e=r.a.useRef(),t=r.a.useRef(),a=D(),n=L().login,o=r.a.useState(""),c=Object(s.a)(o,2),d=c[0],x=c[1],v=r.a.useState(!1),C=Object(s.a)(v,2),k=C[0],I=C[1],F=Object(l.g)(),P=function(){var a=Object(j.a)(p.a.mark((function a(r){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,x(""),I(!0),a.next=6,n(e.current.value,t.current.value);case 6:F.push("/"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),x("Failed to sign in");case 12:I(!1);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(S.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(m.a,{}),Object(S.jsx)(W.a,{p:2}),Object(S.jsxs)("div",{className:a.paper,children:[Object(S.jsx)(y.a,{className:a.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(b.a,{className:a.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Log in"}),d&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(R.a,{children:"Error"}),d]}),Object(S.jsxs)("form",{className:a.form,onSubmit:P,children:[Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"off",inputRef:t,InputLabelProps:{classes:{root:a.cssLabel,focused:a.cssFocused}},InputProps:{classes:{root:a.cssOutlinedInput,input:a.cssInput,focused:a.cssFocused,notchedOutline:a.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(h.a,{disabled:k,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:a.submit,children:"Log In"}),Object(S.jsx)(h.a,{component:i.b,to:"/",fullWidth:!0,variant:"contained",color:"secondary",className:a.cancel,children:"Cancel"}),Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/forgot-password",variant:"body2",color:"secondary",children:"Forgot password?"})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})]})]})]})]})},U=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,padding:e.spacing(4),marginBottom:e.spacing(6),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),color:e.palette.secondary.light,backgroundColor:e.palette.primary.contrastText},greenBoldText:{color:e.palette.secondary.light,fontWeight:"Bolder"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,0)},cancel:{margin:e.spacing(2,0,2),backgroundColor:"grey"},cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")}}})),z=function(){var e=r.a.useRef(),t=U(),a=L().resetPassword,n=r.a.useState(""),o=Object(s.a)(n,2),c=o[0],l=o[1],d=r.a.useState(""),x=Object(s.a)(d,2),v=x[0],C=x[1],k=r.a.useState(!1),I=Object(s.a)(k,2),F=I[0],P=I[1],T=function(){var t=Object(j.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,C(""),l(""),P(!0),t.next=7,a(e.current.value);case 7:C("Check your inbox for further instructions"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),l("Failed to reset password. "+t.t0.message);case 13:P(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(S.jsxs)(w.a,{component:"main",maxWidth:"xs",children:[Object(S.jsx)(m.a,{}),Object(S.jsx)(W.a,{p:2}),Object(S.jsxs)("div",{className:t.paper,children:[Object(S.jsx)(y.a,{className:t.greenBoldText,component:"h1",variant:"h3",children:"GoGreen"}),Object(S.jsx)(b.a,{className:t.avatar,children:Object(S.jsx)(f.a,{})}),Object(S.jsx)(y.a,{component:"h1",variant:"h5",children:"Reset Password"}),c&&Object(S.jsxs)(M.a,{severity:"error",children:[Object(S.jsx)(R.a,{children:"Error"}),c]}),v&&Object(S.jsxs)(M.a,{severity:"success",children:[Object(S.jsx)(R.a,{children:"Reset Email Sent"}),v]}),Object(S.jsxs)("form",{className:t.form,onSubmit:T,children:[Object(S.jsx)(O.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"off",autoFocus:!0,inputRef:e,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}}),Object(S.jsx)(h.a,{disabled:F,type:"submit",fullWidth:!0,variant:"contained",color:"secondary",className:t.submit,children:"Reset via Email"}),Object(S.jsx)(h.a,{component:i.b,to:"/login",fullWidth:!0,variant:"contained",color:"secondary",className:t.cancel,children:"GO TO LOG IN"}),Object(S.jsx)(u.a,{container:!0,children:Object(S.jsx)(u.a,{item:!0,children:Object(S.jsx)(g.a,{component:i.b,to:"/signup",variant:"body2",color:"secondary",children:"Don't have an account? Sign Up"})})})]})]})]})},$=a(96),q=a(273),H=a(274),J=a(275),Y=a(137),K=a.n(Y),V=a(138),Z=a.n(V),Q=a(140),X=a.n(Q),_=a(139),ee=a.n(_),te=a(272),ae=Object(te.a)({palette:{primary:{light:"#484848",main:"#212121",mainLight:"#303030",dark:"#000000",contrastText:"#fff"},secondary:{light:"#80e27e",main:"#4caf50",dark:"#087f23",contrastText:"#000"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),ne=a(276),re=Object($.a)({overrides:{MuiBottomNavigation:{root:{position:"fixed",bottom:0,width:"100%",backgroundColor:ae.palette.primary.main}},MuiBottomNavigationAction:{root:{color:ae.palette.primary.contrastText,boxSizing:"border-box","&:hover":{color:ae.palette.secondary.main},"&$selected":{color:ae.palette.secondary.light,"&:hover":{color:ae.palette.secondary.main}}}}}}),oe=function(e){return Object(S.jsx)(q.a,{theme:re,children:Object(S.jsxs)(H.a,{value:e.pageValue,onChange:function(t,a){e.onPageChange(a)},showLabels:!0,children:[Object(S.jsx)(J.a,{component:i.b,to:"/",label:"Home",icon:Object(S.jsx)(K.a,{})}),Object(S.jsx)(J.a,{component:i.b,to:"/check-in",label:"Check-in",icon:Object(S.jsx)(ne.a,{color:"secondary",variant:"dot",invisible:e.checkinCompleted,children:Object(S.jsx)(Z.a,{})})}),Object(S.jsx)(J.a,{component:i.b,to:"/badges",label:"Badges",icon:Object(S.jsx)(ee.a,{})}),Object(S.jsx)(J.a,{component:i.b,to:"/ranking",label:"Ranking",icon:Object(S.jsx)(X.a,{})})]})})},ce=a(281),se=a(282),ie=a(267),le=a(295),ue=a(280),de=a(278),pe=a(279),je=a(277),be=function(e){return Object(S.jsxs)(le.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(S.jsx)(je.a,{id:"alert-dialog-title",children:"ERROR"}),Object(S.jsx)(de.a,{children:Object(S.jsx)(pe.a,{id:"alert-dialog-description",children:e.errorMsg})}),Object(S.jsx)(ue.a,{children:Object(S.jsx)(h.a,{onClick:e.onClose,autoFocus:!0,children:"OK"})})]})},he=Object($.a)({overrides:{MuiAppBar:{colorPrimary:{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.dark}},MuiButton:{root:{position:"absolute",right:10,color:ae.palette.secondary.main,backgroundColor:ae.palette.primary.main,"&:hover":{color:ae.palette.secondary.light,backgroundColor:ae.palette.primary.light}}}}}),me=function(){var e=r.a.useState(""),t=Object(s.a)(e,2),a=t[0],n=t[1],o=L(),c=o.currentUser,u=o.logout,d=Object(l.g)(),b=r.a.useState(!1),m=Object(s.a)(b,2),O=m[0],g=m[1],x=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(""),e.prev=1,e.next=4,u();case 4:d.push("/login"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),n("Failed to log out"),g(!0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return Object(S.jsx)(q.a,{theme:he,children:Object(S.jsx)(ce.a,{position:"static",children:Object(S.jsxs)(se.a,{children:[Object(S.jsxs)(ie.a,{component:i.b,to:"/",edge:"start",color:"inherit","aria-label":"home",children:[Object(S.jsx)(f.a,{}),Object(S.jsx)(W.a,{mr:1}),Object(S.jsx)(y.a,{variant:"h5",children:"GoGreen"})]}),null===c?Object(S.jsx)(h.a,{component:i.b,to:"/login",children:"LOG IN"}):Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(h.a,{onClick:x,children:"LOG OUT"}),Object(S.jsx)(be,{open:O,onClose:function(){g(!1)},errorMsg:a})]})]})})})},Oe=a(119),ge=a(28),xe=a(95),fe=a.n(xe),ye=function(){return fe.a.utc().startOf("day").toDate()};var ve,we=function(e){var t=(new Date).valueOf().toString(36);return function(e){for(var t=(new Date).getTime(),a=0;a<1e7&&!((new Date).getTime()-t>e);a++);}(1),e?e+t:t},Ce=function(e){return e>75?"green":e>50?"gold":e>25?"orange":"red"},ke=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.collection("surveys").where("date",">",ye()).get().then((function(e){var t={};e.forEach((function(e){var a=e.data().city,n=e.data().coordinates.lat,r=e.data().coordinates.lng,o=e.data().score;t.hasOwnProperty(a)?t[a]=Object(ge.a)(Object(ge.a)({},t[a]),{},{sum:parseFloat(t[a].sum)+parseFloat(o),count:parseFloat(t[a].count)+1}):t[a]={id:we("marker"),city:a,color:"green",coordinates:[n,r],sum:parseFloat(o),count:1}}));var a=[];return Object.entries(t).forEach((function(e){var t=Object(s.a)(e,2),n=(t[0],t[1]),r=Math.ceil(parseFloat(n.sum)/parseFloat(n.count));a.push({id:n.id,city:n.city,color:Ce(r),coordinates:n.coordinates,value:66,score:r})})),a})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=a(6),Fe=a(77),Se=function(e){return Math.random()>.5?e*Math.random():-e*Math.random()},Pe=function(e){var t=Math.max(e.value/12,1),a=new Ie.s(t,10,10),n=new Ie.j({color:new Ie.d(e.color)}),r=new Ie.i(a,n),o=new Ie.n(e.color,1,0,2),c=Object(Fe.a)(r.geometry,{backside:!1,coefficient:.2,color:e.color,power:3,size:15});r.children=[],r.add(o),r.add(c);for(var i=[],l=0;l<10;l++){var u=new Ie.s(Math.min(t*Math.random(),3.5),10,10),d=new Ie.j({color:new Ie.d(e.color)}),p=new Ie.i(u,d);p.lookAt(new Ie.x(0,0,0)),i.push(p),r.add(p)}return i.forEach((function(e,a){!function n(){var r={opacity:.1,position:e.position.clone().toArray(),scale:Math.max(.5,Math.random())},c={opacity:.5,position:[Se(3*t),Se(3*t),Se(t)],scale:.01};Object(Oe.b)({from:r,to:c,animationDuration:4e3,easingFunction:["Quadratic","InOut"],onUpdate:function(){var t=Object(s.a)(r.position,3),a=t[0],n=t[1],c=t[2],i=e.material,l=Se(.03);o.intensity+l>0&&o.intensity+l<1.8&&(o.intensity+=l),i.opacity=r.opacity,e.scale.x=r.scale,e.scale.y=r.scale,e.scale.z=r.scale,e.position.set(a,n,c)},onEnd:n,delay:200*a})}()})),r},Le=function(){var e=r.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!0),c=Object(s.a)(o,2),i=c[0],l=c[1];r.a.useEffect((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,ke();case 4:t=e.sent,n(t),l(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),l(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var u={cameraRotateSpeed:.5,cameraAutoRotateSpeed:.35,focusAnimationDuration:2e3,enableMarkerGlow:"true",globeCloudsOpacity:.5,globeGlowColor:"blue",enableMarkerTooltip:!0,markerTooltipRenderer:function(e){return"".concat(e.city,": ").concat(e.score)},markerRenderer:Pe};return i?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)("div",{style:{backgroundColor:"black",height:"100vh"},children:Object(S.jsx)(Oe.a,{height:"90vh",width:"auto",markers:a,options:u,initialCoordinates:[42.3355,71.1685],initialCameraDistanceRadiusScale:5})})},Te=a(209),Ne=a(284),Be=a(297),Me=a(98),Re=a(97),We=a(100),Ee=a.n(We),Ge=Object(v.a)((function(e){return{cssLabel:{color:"".concat(e.palette.secondary.light," !important")},cssInput:{color:"".concat(e.palette.primary.contrastText," !important")},cssOutlinedInput:{"&$cssFocused $notchedOutline":{borderColor:"".concat(e.palette.secondary.light," !important")}},cssFocused:{color:"".concat(e.palette.secondary.light," !important")},notchedOutline:{borderWidth:"1px",borderColor:"".concat(e.palette.secondary.light," !important")},autocompleteResults:{padding:"2px"}}})),De=function(e){var t=Ge(),a=e.city,n=e.onSetCity,o=e.coordinates,c=e.onSetCoordinates,s=function(){var e=Object(j.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(We.geocodeByAddress)(t);case 2:return a=e.sent,e.next=5,Object(We.getLatLng)(a[0]);case 5:r=e.sent,n(t),c(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsxs)(r.a.Fragment,{children:[Object(S.jsx)(y.a,{color:"secondary",children:"Which city are you currently in?"}),Object(S.jsx)(Ee.a,{value:a,onChange:n,onSelect:s,searchOptions:{types:["(cities)"]},children:function(e){var a=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,c=e.loading;return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(O.a,Object(ge.a)(Object(ge.a)({},a({placeholder:"Type then select city"})),{},{error:null===o.lat||null===o.lng,variant:"outlined",margin:"dense",required:!0,id:"city",label:"City",name:"city",autoComplete:"off",autoFocus:!0,InputLabelProps:{classes:{root:t.cssLabel,focused:t.cssFocused}},InputProps:{classes:{root:t.cssOutlinedInput,input:t.cssInput,focused:t.cssFocused,notchedOutline:t.notchedOutline},inputMode:"numeric"}})),Object(S.jsx)("div",{children:c?Object(S.jsx)("div",{style:{color:"white"},children:"...loading"}):Object(S.jsx)(S.Fragment,{children:n.length?Object(S.jsx)(Te.a,{elevation:0,className:t.autocompleteResults,children:n.map((function(e,t){var a={color:ae.palette.primary.contrastText,backgroundColor:e.active?ae.palette.secondary.main:ae.palette.primary.main};return Object(S.jsx)("div",Object(ge.a)(Object(ge.a)({},r(e,{style:a})),{},{children:e.description}),t)}))}):null})})]})}})]})},Ae=a(78),Ue=a.n(Ae),ze=a(9),$e=a(144),qe=a.n($e),He=a(283),Je=r.a.forwardRef((function(e,t){return Object(S.jsx)(He.a,Object(ge.a)({direction:"down",ref:t},e))})),Ye=Object(ze.a)((function(e){return{root:{padding:e.spacing(2)}}}))(de.a),Ke=Object(ze.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(ue.a),Ve=function(){var e=r.a.useState(!1),t=Object(s.a)(e,2),a=t[0],n=t[1],o=function(){n(!1)};return Object(S.jsxs)("div",{children:[Object(S.jsxs)(y.a,{color:"secondary",variant:"body2",children:["Need help?",Object(S.jsx)(ie.a,{onClick:function(){n(!0)},children:Object(S.jsx)(qe.a,{color:"secondary",fontSize:"small"})})]}),Object(S.jsxs)(le.a,{onClose:o,TransitionComponent:Je,fullWidth:!0,maxWidth:"sm","aria-labelledby":"customized-dialog-title",open:a,PaperProps:{style:{backgroundColor:"#2e2e2e",color:"white"}},children:[Object(S.jsx)(je.a,{children:"Help"}),Object(S.jsxs)(Ye,{dividers:!0,children:[Object(S.jsx)(y.a,{gutterBottom:!0,children:"You need to select a level that best describes the environmental friendliness of your commuting today. (Please be honest. The result is anonymous.)"}),Object(S.jsxs)(y.a,{gutterBottom:!0,color:"secondary",children:[Object(S.jsx)(f.a,{fontSize:"small"})," Green: You commuted on foot, by bike, with electric vehicle, by public transportation..."]}),Object(S.jsxs)(y.a,{gutterBottom:!0,color:"error",children:[Object(S.jsx)(Ue.a,{fontSize:"small"})," Gasoline: You drove a fossil-fueled vehicle."]}),Object(S.jsx)(y.a,{gutterBottom:!0,children:"In between green and gasoline, there are some intermediate levels that you can choose."})]}),Object(S.jsx)(Ke,{children:Object(S.jsx)(h.a,{autoFocus:!0,onClick:o,color:"secondary",children:"Got it"})})]})]})},Ze=Object($.a)({palette:{secondary:{main:ae.palette.secondary.main}},overrides:{MuiToggleButtonGroup:{root:{padding:"2px 5px",borderRadius:"15px",backgroundImage:"linear-gradient(".concat(Me.a[500],", ").concat(Re.a[300],")")}},MuiToggleButton:{sizeLarge:{padding:"15px 45px"},root:{color:"white",backgroundColor:"rgba(0, 0, 0, .5)",fontWeight:"lighter",margin:"3px 0",borderRadius:10,"&:hover":{color:"black",backgroundColor:"rgba(255, 255, 255, .4)"},"&$selected":{color:"black",backgroundColor:"rgba(255, 255, 255, .8)",fontWeight:"bolder","&:hover":{backgroundColor:"rgba(255, 255, 255, .4)"}}}},MuiButton:{root:{backgroundColor:"rgba(255, 255, 255, .2)"}}}}),Qe=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.mainLight,marginTop:e.spacing(2),marginBottom:e.spacing(10),padding:"30px 0px",display:"flex",flexDirection:"column",alignItems:"center"},greenBold:{color:e.palette.secondary.light,fontWeight:"bolder",marginBottom:"20px"}}})),Xe=function(e,t){var a=Qe(),n=e.city,r=e.setCity,o=e.coordinates,c=e.setCoordinates,s=e.level,i=e.setLevel,l=e.onSubmit,d=e.submitError;return Object(S.jsx)(q.a,{theme:Ze,children:Object(S.jsxs)(u.a,{container:!0,children:[Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3}),Object(S.jsx)(u.a,{item:!0,xs:10,sm:8,md:6,children:Object(S.jsxs)(Te.a,{className:a.paper,elevation:10,children:[Object(S.jsx)(y.a,{className:a.greenBold,variant:"h5",component:"h1",children:"Today's Check-in"}),Object(S.jsx)(De,{city:n,onSetCity:r,coordinates:o,onSetCoordinates:c}),Object(S.jsx)(W.a,{mt:2}),Object(S.jsx)(y.a,{color:"secondary",children:"How did you commute today?"}),Object(S.jsx)(y.a,{color:"secondary",children:"Select a level below."}),Object(S.jsxs)(Be.a,{orientation:"vertical",value:s,size:"large",exclusive:!0,onChange:function(e,t){null!==t&&i(t)},children:[Object(S.jsxs)(Ne.a,{value:"100","aria-label":"All Green",children:[Object(S.jsx)(f.a,{})," Green"]}),Object(S.jsx)(Ne.a,{value:"75","aria-label":"Mostly Green",children:"Mostly Green"}),Object(S.jsxs)(Ne.a,{value:"50","aria-label":"Half",children:["Half ",Object(S.jsx)(f.a,{})," Half ",Object(S.jsx)(Ue.a,{})]}),Object(S.jsx)(Ne.a,{value:"25","aria-label":"Mostly Gasoline",children:"Mostly Gasoline"}),Object(S.jsxs)(Ne.a,{value:"0","aria-label":"All Gasoline",children:[Object(S.jsx)(Ue.a,{})," Gasoline"]})]}),Object(S.jsx)(Ve,{}),Object(S.jsx)(h.a,{color:"secondary",onClick:l,children:"Submit"}),""!==d&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(W.a,{mt:2}),Object(S.jsx)(M.a,{severity:"error",style:{width:"80%"},children:"Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field."})]})]})}),Object(S.jsx)(u.a,{item:!0,xs:1,sm:2,md:3})]})})},_e=function(e,t,a){var n={uid:C.a.auth().currentUser.uid,date:C.a.firestore.Timestamp.fromDate(fe.a.utc().toDate()),city:e,coordinates:{lat:t.lat,lng:t.lng},score:a};return F.collection("surveys").add(n).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){return console.error("Error adding document: ",e),e.message})),""},et=function(){var e=Object(j.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.a.auth().currentUser,a=t.uid,n={},e.abrupt("return",F.collection("surveys").where("date",">",ye()).get().then((function(e){try{e.forEach((function(e){if(e.data().uid===a)throw n}))}catch(t){if(t===n)return!0}return!1})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(e){var t=e.setCheckinCompleted,a=r.a.useState(null),n=Object(s.a)(a,2),o=n[0],c=n[1],i=r.a.useState(!0),l=Object(s.a)(i,2),u=l[0],d=l[1];r.a.useEffect((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,et();case 4:a=e.sent,c(a),t(a),d(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),d(!1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]);var b=r.a.useState(""),h=Object(s.a)(b,2),m=h[0],O=h[1],g=r.a.useState({lat:null,lng:null}),x=Object(s.a)(g,2),f=x[0],y=x[1],v=r.a.useState("100"),w=Object(s.a)(v,2),C=w[0],k=w[1],I=r.a.useState(""),F=Object(s.a)(I,2),P=F[0],L=F[1];return u?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsx)(r.a.Fragment,{children:o?Object(S.jsx)(Le,{}):Object(S.jsx)(Xe,{city:m,setCity:O,coordinates:f,setCoordinates:y,level:C,setLevel:k,onSubmit:function(t){if(L(""),null!==f.lat&&null!==f.lng){var a=_e(m,f,C);""===a?(c(!0),e.setCheckinCompleted(o)):L(a)}else L("Failed to submit. Invalid city name. Please type in a city name and select from the suggestions below the input field.")},submitError:P})})},at=function(e){return Object(S.jsx)("div",{style:{color:"white"},children:"badges"})},nt=a(145),rt=a(3),ot=function(){var e=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",F.collection("surveys").get().then((function(e){var t={};e.forEach((function(e){var a=e.data().city,n=e.data().score;t.hasOwnProperty(a)?t[a]=Object(ge.a)(Object(ge.a)({},t[a]),{},{sum:parseFloat(t[a].sum)+parseFloat(n),count:parseFloat(t[a].count)+1}):t[a]={city:a,sum:parseFloat(n),count:1}}));var a=[];return Object.entries(t).forEach((function(e){var t=Object(s.a)(e,2),n=(t[0],t[1]),r=Math.ceil(parseFloat(n.sum)/parseFloat(n.count));a.push({city:n.city,score:r,userCount:n.count})})),a})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ct=a(288),st=a(300),it=a(299),lt=a(293),ut=a(294),dt=Object(rt.default)(ct.a)(ve||(ve=Object(nt.a)(["\n  color: white;\n"]))),pt=Object(v.a)((function(e){return{paper:{backgroundColor:e.palette.primary.mainLight,marginTop:e.spacing(1),marginBottom:e.spacing(10),padding:"25px 0px",display:"flex",flexDirection:"column",alignItems:"center"},greenBold:{color:e.palette.secondary.light,fontWeight:"bolder",marginBottom:"20px"}}})),jt={button:{color:"white"},dataTable:{color:"white",header:{color:"white",extend:{color:"white"}},body:{color:"white",extend:{color:"white"}},icons:{color:"white"}}},bt=[{property:"city",header:Object(S.jsx)(st.a,{children:"City"}),primary:!0},{property:"userCount",header:"Number of Users",align:"center"},{property:"score",header:"Green Level",render:function(e){return Object(S.jsx)(it.a,{pad:{vertical:"xsmall"},children:Object(S.jsx)(lt.a,{values:[{value:e.score}],thickness:"medium",size:"small",round:!0},e.city)})}}],ht=function(){var e=pt(),t=r.a.useState([]),a=Object(s.a)(t,2),n=a[0],o=a[1],c=r.a.useState(!0),i=Object(s.a)(c,2),l=i[0],d=i[1];return r.a.useEffect((function(){function e(){return(e=Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,ot();case 4:t=e.sent,o(t),d(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),d(!1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),l?Object(S.jsx)("span",{children:"Loading"}):Object(S.jsxs)(u.a,{container:!0,direction:"row",children:[Object(S.jsx)(u.a,{item:!0,xs:!1,sm:2,lg:3}),Object(S.jsx)(u.a,{item:!0,xs:12,sm:8,lg:6,children:Object(S.jsxs)(Te.a,{className:e.paper,elevation:10,children:[Object(S.jsx)(y.a,{className:e.greenBold,variant:"h5",component:"h1",children:"City Ranking"}),Object(S.jsx)(ut.a,{theme:jt,plain:!0,children:Object(S.jsx)(dt,{sort:{direction:"desc",property:"score"},sortable:!0,columns:bt.map((function(e){return Object(ge.a)(Object(ge.a)({},e),{},{search:"city"===e.property})})),data:n,step:100})})]})}),Object(S.jsx)(u.a,{item:!0,xs:!1,sm:2,lg:3})]})},mt=a(162),Ot=function(e){var t=e.component,a=Object(mt.a)(e,["component"]),n=L().currentUser;return Object(S.jsx)(l.b,Object(ge.a)(Object(ge.a)({},a),{},{render:function(e){return n?Object(S.jsx)(t,Object(ge.a)(Object(ge.a)({},e),a)):Object(S.jsx)(l.a,{to:"/login"})}}))},gt=function(){var e=r.a.useState(0),t=Object(s.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(s.a)(o,2),d=c[0],p=c[1];return Object(S.jsx)("div",{style:{backgroundColor:ae.palette.primary.dark,height:"100%",overflow:"auto"},children:Object(S.jsxs)(i.a,{basename:"/go-green",children:[Object(S.jsx)(T,{children:Object(S.jsxs)(l.d,{children:[Object(S.jsx)(l.b,{path:"/signup",component:G}),Object(S.jsx)(l.b,{path:"/login",component:A}),Object(S.jsx)(l.b,{path:"/forgot-password",component:z}),Object(S.jsx)(r.a.Fragment,{children:Object(S.jsxs)(u.a,{container:!0,direction:"column",children:[Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(me,{})}),Object(S.jsx)(u.a,{item:!0,children:Object(S.jsxs)("main",{children:[Object(S.jsx)(Ot,{path:"/check-in",component:tt,setCheckinCompleted:p}),Object(S.jsx)(Ot,{path:"/badges",component:at}),Object(S.jsx)(Ot,{path:"/ranking",component:ht}),Object(S.jsx)(l.b,{exact:!0,path:"/",children:"home"})]})}),Object(S.jsx)(u.a,{item:!0,xs:12,children:Object(S.jsx)(oe,{pageValue:a,onPageChange:n,checkinCompleted:d})})]})})]})})," "]})})};c.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(q.a,{theme:ae,children:Object(S.jsx)(gt,{})})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.b2ae4a41.chunk.js.map